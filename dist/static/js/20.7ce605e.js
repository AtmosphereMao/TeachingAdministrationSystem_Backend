(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1084:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"table-basic-vue frame-page h-panel"},[e._m(0),e._v(" "),r("div",{staticClass:"h-panel-body"},[r("p",[r("Button",{staticClass:"h-btn h-btn-primary",attrs:{icon:"icon-arrow-left"},on:{click:function(t){return e.back()}}},[e._v("返回列表")])],1),e._v(" "),r("Form",{ref:"form",attrs:{mode:"block",validOnChange:!0,showErrorTip:!0,labelWidth:110,rules:e.rules,model:e.course}},[r("FormItem",{attrs:{label:"分类",prop:"category_id"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("分类")]},proxy:!0}])},[e._v(" "),r("Select",{attrs:{datas:e.courseCategories,keyName:"id",titleName:"name"},model:{value:e.course.category_id,callback:function(t){e.$set(e.course,"category_id",t)},expression:"course.category_id"}})],1),e._v(" "),r("FormItem",{attrs:{label:"标签",prop:"tag_id"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("标签")]},proxy:!0}])},[e._v(" "),r("Select",{attrs:{datas:e.tags,keyName:"id",titleName:"name",multiple:!0},model:{value:e.course.tag_id,callback:function(t){e.$set(e.course,"tag_id",t)},expression:"course.tag_id"}})],1),e._v(" "),r("FormItem",{attrs:{label:"课程封面",prop:"thumb"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("课程封面")]},proxy:!0}])},[e._v(" "),r("image-upload",{attrs:{name:"课程封面"},model:{value:e.course.thumb,callback:function(t){e.$set(e.course,"thumb",t)},expression:"course.thumb"}})],1),e._v(" "),r("FormItem",{attrs:{label:"课程名",prop:"title"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("课程名")]},proxy:!0}])},[e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.course.title,expression:"course.title"}],attrs:{type:"text"},domProps:{value:e.course.title},on:{input:function(t){t.target.composing||e.$set(e.course,"title",t.target.value)}}})]),e._v(" "),r("FormItem",{attrs:{label:"价格",prop:"charge"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("价格")]},proxy:!0}])},[e._v(" "),r("div",{directives:[{name:"width",rawName:"v-width",value:200,expression:"200"}],staticClass:"h-input-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.course.charge,expression:"course.charge"}],attrs:{type:"text"},domProps:{value:e.course.charge},on:{input:function(t){t.target.composing||e.$set(e.course,"charge",t.target.value)}}}),e._v(" "),r("span",{staticClass:"h-input-addon"},[e._v("元")])])]),e._v(" "),r("FormItem",{attrs:{label:"简短介绍",prop:"short_description"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("简短介绍")]},proxy:!0}])},[e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.course.short_description,expression:"course.short_description"}],domProps:{value:e.course.short_description},on:{input:function(t){t.target.composing||e.$set(e.course,"short_description",t.target.value)}}})]),e._v(" "),r("FormItem",{attrs:{label:"详细介绍",prop:"description"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("详细介绍")]},proxy:!0}])},[e._v(" "),r("tinymce-editor",{model:{value:e.course.original_desc,callback:function(t){e.$set(e.course,"original_desc",t)},expression:"course.original_desc"}})],1),e._v(" "),r("FormItem",{attrs:{label:"上架时间",prop:"published_at"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("上架时间")]},proxy:!0}])},[e._v(" "),r("DatePicker",{directives:[{name:"width",rawName:"v-width",value:200,expression:"200"}],attrs:{type:"datetime"},model:{value:e.course.published_at,callback:function(t){e.$set(e.course,"published_at",t)},expression:"course.published_at"}})],1),e._v(" "),r("FormItem",{attrs:{label:"显示",prop:"is_show"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("显示")]},proxy:!0}])},[e._v(" "),r("h-switch",{attrs:{trueValue:1,falseValue:-1},model:{value:e.course.is_show,callback:function(t){e.$set(e.course,"is_show",t)},expression:"course.is_show"}})],1),e._v(" "),r("FormItem",{attrs:{label:"推荐",prop:"is_rec"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("推荐")]},proxy:!0}])},[e._v(" "),r("h-switch",{attrs:{trueValue:1,falseValue:0},model:{value:e.course.is_rec,callback:function(t){e.$set(e.course,"is_rec",t)},expression:"course.is_rec"}})],1),e._v(" "),r("FormItem",{attrs:{label:"SEO描述",prop:"seo_description"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("SEO描述")]},proxy:!0}])},[e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.course.seo_description,expression:"course.seo_description"}],domProps:{value:e.course.seo_description},on:{input:function(t){t.target.composing||e.$set(e.course,"seo_description",t.target.value)}}})]),e._v(" "),r("FormItem",{attrs:{label:"SEO关键字",prop:"seo_keywords"},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("SEO关键字")]},proxy:!0}])},[e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.course.seo_keywords,expression:"course.seo_keywords"}],domProps:{value:e.course.seo_keywords},on:{input:function(t){t.target.composing||e.$set(e.course,"seo_keywords",t.target.value)}}})]),e._v(" "),r("FormItem",[r("Button",{attrs:{color:"primary"},on:{click:e.create}},[e._v("添加")])],1)],1)],1)])])},n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"h-panel-bar"},[t("span",{staticClass:"h-panel-title"},[this._v("添加课程")])])}];o._withStripped=!0},325:function(e,t,r){"use strict";r.r(t);var o=r(1084),n=r(611);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);var s=r(15),i=Object(s.a)(n.default,o.a,o.b,!1,null,null,null);i.options.__file="src/components/course/create.vue",t.default=i.exports},364:function(e,t,r){"use strict";r.r(t);var o=r(365),n=r.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(a);t.default=n.a},365:function(e,t,r){"use strict";(function(e){var o=r(24);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(400)),a={props:{value:{type:String,default:""}},components:{tinymce:n.default},data:function(){return{data:this.value,id:"tinymce"+Math.ceil(100*Math.random()),config:{height:"400px",language:"zh_CN",convert_urls:!1,language_url:window.location.protocol+"//"+window.location.host+window.location.pathname+"/dist/tinymce/zh_CN.js",automatic_uploads:!0,images_upload_handler:function(t,r,o){var n,a;(n=new XMLHttpRequest).withCredentials=!1,n.open("POST","/backend/api/v1/upload/image/tinymce"),n.setRequestHeader("Authorization","Bearer "+e.getLocal("token")),n.onload=function(){var e;200===n.status?(e=JSON.parse(n.responseText))&&"string"==typeof e.location?r(e.location):o("Invalid JSON: "+n.responseText):o("HTTP Error: "+n.status)},(a=new FormData).append("file",t.blob(),t.filename()),n.send(a)}}}},watch:{value:function(e,t){this.data=e},data:function(e,t){this.$emit("input",e)}}};t.default=a}).call(this,r(49).default)},375:function(e,t,r){"use strict";r.r(t);var o=r(376),n=r(364);for(var a in n)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(a);var s=r(15),i=Object(s.a)(n.default,o.a,o.b,!1,null,null,null);i.options.__file="src/components/common/tinymce.vue",t.default=i.exports},376:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return n}));var o=function(){var e=this,t=e.$createElement;return(e._self._c||t)("tinymce",{attrs:{id:e.id,other_options:e.config},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})},n=[];o._withStripped=!0},611:function(e,t,r){"use strict";r.r(t);var o=r(612),n=r.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(a);t.default=n.a},612:function(e,t,r){"use strict";(function(e,o){var n=r(24);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(375)),s=n(r(538));function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var c={components:{TinymceEditor:a.default},data:function(){return{course:s.default.parse({}),rules:{required:["category_id","tag_id","thumb","title","charge","short_description","published_at","is_show","is_rec","seo_description","seo_keywords"]},courseCategories:[],tags:[]}},mounted:function(){this.init(),this.getCourseCategories(),this.getTags()},methods:{getCourseCategories:function(){var t=this;e.Course.CreateParams().then((function(e){t.courseCategories=e.data.categories}))},getTags:function(){var t=this;e.Tag.List().then((function(e){var r,o=[],n=i(e.data.data);try{for(n.s();!(r=n.n()).done;){var a=r.value;1===a.is_show&&o.push(a)}}catch(e){n.e(e)}finally{n.f()}t.tags=o}))},init:function(){this.course.is_show=0},back:function(){this.$router.push({name:"Course"})},create:function(){var t=this;this.$refs.form.valid().result&&(this.course.render_desc=this.course.original_desc,this.course.tag_id="["+this.course.tag_id.toString()+"]",e.Course.Create(this.course).then((function(e){o.$Message.success("添加成功"),t.$router.push({name:"Course"})})))}}};t.default=c}).call(this,r(356).default,r(70))}}]);